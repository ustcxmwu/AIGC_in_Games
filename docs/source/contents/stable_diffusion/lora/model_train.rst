.. _LoRA 模型训练:

LoRA 模型训练
================================================================================

1. 训练前准备
--------------------------------------------------------------------------------

1.1 训练脚本
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

LoRA 训练过程依赖于以下两个 Git repo

1. `Akegarasu/lora-scripts <https://github.com/Akegarasu/lora-scripts>`_
#. `kohya-ss/sd-scripts <https://github.com/kohya-ss/sd-scripts>`_

1.2 标记数据集
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


2. 环境安装
--------------------------------------------------------------------------------

2.1 Ubuntu LoRA 训练环境安装
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

1. 下载源代码

.. code:: bash

    git clone --recurse-submodules https://github.com/Akegarasu/lora-scripts
    
.. Attention:: kohya-ss/sd-scripts 会作为 Submodel 下载在 sd-scripts 文件夹内, 无需额外下载。

2. 安装，在 lora-scripts 路径下执行

.. code:: bash

    ./install.bash

.. Attention::

    1. 该命令会在 lora-scripts 创建 Python venv 环境并激活
    #. 在激活的 Python 虚拟环境中安装 lora-scripts 和 sd-scripts 的相关依赖
    #. 安装过程中会下载 torch 的相关文件，该文件比较大，有可能网络中断，删除 venv 文件后重试即可






2.2 Win LoRA 训练环境安装
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^



